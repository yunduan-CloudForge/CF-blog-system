# 生产环境配置
NODE_ENV=production
PORT=3000
API_PORT=3001

# 应用配置
APP_NAME=Blog System
APP_VERSION=1.0.0
APP_URL=https://yourdomain.com
APP_DOMAIN=yourdomain.com

# 数据库配置（生产环境使用环境变量）
DATABASE_URL=${DATABASE_URL}
DATABASE_HOST=${DB_HOST}
DATABASE_PORT=${DB_PORT}
DATABASE_NAME=${DB_NAME}
DATABASE_USER=${DB_USER}
DATABASE_PASSWORD=${DB_PASSWORD}
DATABASE_SSL=true
DATABASE_SSL_REJECT_UNAUTHORIZED=false
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20
DATABASE_POOL_ACQUIRE=60000
DATABASE_POOL_IDLE=10000

# Redis配置
REDIS_URL=${REDIS_URL}
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=${REDIS_PORT}
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_TTL=3600
REDIS_CLUSTER_MODE=false

# JWT配置（生产环境必须使用强密钥）
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=24h
JWT_REFRESH_SECRET=${JWT_REFRESH_SECRET}
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=blog-system
JWT_AUDIENCE=blog-users

# 邮件配置
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=${SMTP_PORT}
SMTP_USER=${SMTP_USER}
SMTP_PASS=${SMTP_PASS}
SMTP_FROM=${SMTP_FROM}
SMTP_SECURE=true
SMTP_TLS_REJECT_UNAUTHORIZED=true

# 文件上传配置
UPLOAD_MAX_SIZE=20971520
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,image/webp
UPLOAD_PATH=/app/uploads
STATIC_URL=https://yourdomain.com/static
CDN_URL=${CDN_URL}
CLOUD_STORAGE_ENABLED=true
CLOUD_STORAGE_PROVIDER=aws
AWS_BUCKET=${AWS_BUCKET}
AWS_REGION=${AWS_REGION}
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}

# 日志配置
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/app/logs
LOG_MAX_SIZE=50m
LOG_MAX_FILES=10
LOG_COMPRESS=true
LOG_DATE_PATTERN=YYYY-MM-DD

# 缓存配置
CACHE_TTL=1800
CACHE_MAX_ITEMS=10000
CACHE_REDIS_ENABLED=true

# 安全配置
CORS_ORIGIN=${CORS_ORIGIN}
CORS_CREDENTIALS=true
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX=100
CSRF_SECRET=${CSRF_SECRET}
CSRF_PROTECTION=true
HELMET_ENABLED=true
HTTPS_ONLY=true
HSTS_MAX_AGE=31536000

# 监控配置
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_TIMEOUT=5000

# APM配置
APM_ENABLED=true
APM_SERVICE_NAME=blog-system
APM_SERVICE_VERSION=1.0.0
APM_ENVIRONMENT=production
NEW_RELIC_LICENSE_KEY=${NEW_RELIC_LICENSE_KEY}
SENTRY_DSN=${SENTRY_DSN}

# 第三方服务配置
SUPABASE_URL=${SUPABASE_URL}
SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
SUPABASE_SERVICE_ROLE_KEY=${SUPABASE_SERVICE_ROLE_KEY}

# 搜索服务配置
ELASTICSEARCH_URL=${ELASTICSEARCH_URL}
ELASTICSEARCH_INDEX=blog_prod
ELASTICSEARCH_USERNAME=${ELASTICSEARCH_USERNAME}
ELASTICSEARCH_PASSWORD=${ELASTICSEARCH_PASSWORD}

# 消息队列配置
QUEUE_REDIS_URL=${QUEUE_REDIS_URL}
QUEUE_CONCURRENCY=5
QUEUE_MAX_ATTEMPTS=3
QUEUE_BACKOFF_DELAY=5000

# SSL/TLS配置
SSL_CERT_PATH=${SSL_CERT_PATH}
SSL_KEY_PATH=${SSL_KEY_PATH}
SSL_CA_PATH=${SSL_CA_PATH}

# 性能配置
CLUSTER_MODE=true
WORKER_PROCESSES=${WORKER_PROCESSES}
KEEP_ALIVE_TIMEOUT=65000
REQUEST_TIMEOUT=30000
BODY_LIMIT=10mb
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6

# 备份配置
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=${BACKUP_S3_BUCKET}
BACKUP_ENCRYPTION_KEY=${BACKUP_ENCRYPTION_KEY}

# 调试配置（生产环境关闭）
DEBUG=
VERBOSE_LOGGING=false
SQL_LOGGING=false
REQUEST_LOGGING=false
SOURCE_MAPS=false

# 容器配置
CONTAINER_NAME=blog-system-prod
CONTAINER_RESTART_POLICY=unless-stopped
CONTAINER_MEMORY_LIMIT=2g
CONTAINER_CPU_LIMIT=1

# 负载均衡配置
LOAD_BALANCER_ENABLED=true
LOAD_BALANCER_ALGORITHM=round_robin
LOAD_BALANCER_HEALTH_CHECK=/health
LOAD_BALANCER_TIMEOUT=30

# CDN配置
CDN_ENABLED=true
CDN_PROVIDER=cloudflare
CDN_ZONE_ID=${CDN_ZONE_ID}
CDN_API_TOKEN=${CDN_API_TOKEN}

# 数据库连接池配置
DB_POOL_MIN=10
DB_POOL_MAX=50
DB_POOL_ACQUIRE=60000
DB_POOL_IDLE=10000
DB_POOL_EVICT=1000

# 会话配置
SESSION_SECRET=${SESSION_SECRET}
SESSION_STORE=redis
SESSION_TTL=86400
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

# 安全头配置
SECURITY_HEADERS_ENABLED=true
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block
REFERRER_POLICY=strict-origin-when-cross-origin

# 限流配置（生产环境更严格）
RATE_LIMIT_GLOBAL_MAX=10000
RATE_LIMIT_PER_IP_MAX=100
RATE_LIMIT_PER_USER_MAX=1000
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false