{
  "backup_config": {
    "enabled": true,
    "backup_directory": "/var/backups/monitoring",
    "retention_policy": {
      "daily_backups": 7,
      "weekly_backups": 4,
      "monthly_backups": 12,
      "yearly_backups": 3
    },
    "compression": {
      "enabled": true,
      "algorithm": "gzip",
      "level": 6
    },
    "encryption": {
      "enabled": false,
      "algorithm": "AES-256",
      "key_file": "/etc/monitoring/backup.key"
    },
    "notification": {
      "enabled": true,
      "on_success": false,
      "on_failure": true,
      "channels": ["email", "slack"]
    }
  },
  "prometheus_backup": {
    "enabled": true,
    "schedule": "0 2 * * *",
    "data_directory": "/prometheus/data",
    "backup_type": "snapshot",
    "snapshot_api": "http://prometheus:9090/api/v1/admin/tsdb/snapshot",
    "retention_days": 30,
    "include_wal": true,
    "exclude_patterns": [
      "*.tmp",
      "queries.active",
      "lock"
    ],
    "verification": {
      "enabled": true,
      "method": "checksum",
      "restore_test": false
    }
  },
  "grafana_backup": {
    "enabled": true,
    "schedule": "0 3 * * *",
    "api_url": "http://grafana:3000/api",
    "api_key": "${GRAFANA_API_KEY}",
    "backup_items": {
      "dashboards": true,
      "datasources": true,
      "folders": true,
      "alerts": true,
      "annotations": true,
      "users": false,
      "organizations": false,
      "preferences": true,
      "plugins": true
    },
    "export_format": "json",
    "include_permissions": true,
    "folder_structure": {
      "dashboards": "dashboards",
      "datasources": "datasources",
      "folders": "folders",
      "alerts": "alerts"
    }
  },
  "alertmanager_backup": {
    "enabled": true,
    "schedule": "0 3 30 * *",
    "config_file": "/etc/alertmanager/alertmanager.yml",
    "data_directory": "/alertmanager/data",
    "backup_items": {
      "configuration": true,
      "silences": true,
      "notification_log": false,
      "templates": true
    },
    "api_url": "http://alertmanager:9093/api/v1"
  },
  "loki_backup": {
    "enabled": true,
    "schedule": "0 4 * * *",
    "data_directory": "/loki/data",
    "backup_type": "filesystem",
    "retention_days": 14,
    "chunk_backup": {
      "enabled": true,
      "parallel_jobs": 4,
      "chunk_size_mb": 100
    },
    "index_backup": {
      "enabled": true,
      "include_cache": false
    }
  },
  "jaeger_backup": {
    "enabled": true,
    "schedule": "0 5 * * 0",
    "storage_type": "elasticsearch",
    "elasticsearch_config": {
      "url": "http://elasticsearch:9200",
      "indices_pattern": "jaeger-*",
      "backup_repository": "jaeger_backup",
      "snapshot_name_template": "jaeger-{date}"
    },
    "retention_days": 7,
    "include_dependencies": true
  },
  "elasticsearch_backup": {
    "enabled": true,
    "schedule": "0 1 * * *",
    "cluster_url": "http://elasticsearch:9200",
    "repository_name": "monitoring_backup",
    "repository_type": "fs",
    "repository_settings": {
      "location": "/var/backups/elasticsearch",
      "compress": true,
      "chunk_size": "1gb"
    },
    "snapshot_settings": {
      "indices": "*",
      "ignore_unavailable": true,
      "include_global_state": false,
      "partial": false
    },
    "retention_policy": {
      "delete_after_days": 30,
      "min_count": 5,
      "max_count": 50
    }
  },
  "kibana_backup": {
    "enabled": true,
    "schedule": "0 3 * * 0",
    "api_url": "http://kibana:5601/api",
    "backup_items": {
      "saved_objects": true,
      "index_patterns": true,
      "dashboards": true,
      "visualizations": true,
      "searches": true,
      "config": true
    },
    "export_format": "ndjson",
    "include_references": true
  },
  "configuration_backup": {
    "enabled": true,
    "schedule": "0 6 * * *",
    "config_directories": [
      "/etc/prometheus",
      "/etc/grafana",
      "/etc/alertmanager",
      "/etc/loki",
      "/etc/jaeger",
      "/etc/elasticsearch",
      "/etc/kibana",
      "/etc/filebeat",
      "/etc/metricbeat",
      "/etc/promtail"
    ],
    "exclude_patterns": [
      "*.log",
      "*.pid",
      "*.lock",
      "tmp/*",
      "cache/*"
    ],
    "git_backup": {
      "enabled": false,
      "repository": "git@github.com:company/monitoring-configs.git",
      "branch": "main",
      "commit_message_template": "Automated config backup - {timestamp}"
    }
  },
  "docker_backup": {
    "enabled": true,
    "schedule": "0 7 * * 0",
    "backup_items": {
      "volumes": true,
      "images": false,
      "containers_config": true,
      "networks": true,
      "compose_files": true
    },
    "volume_backup": {
      "include_volumes": [
        "prometheus-data",
        "grafana-data",
        "alertmanager-data",
        "loki-data",
        "elasticsearch-data",
        "kibana-data"
      ],
      "exclude_volumes": [
        "tmp-*",
        "cache-*"
      ]
    }
  },
  "remote_backup": {
    "enabled": false,
    "providers": {
      "s3": {
        "enabled": false,
        "bucket": "monitoring-backups",
        "region": "us-east-1",
        "access_key": "${AWS_ACCESS_KEY_ID}",
        "secret_key": "${AWS_SECRET_ACCESS_KEY}",
        "storage_class": "STANDARD_IA",
        "encryption": "AES256"
      },
      "azure": {
        "enabled": false,
        "storage_account": "monitoringbackups",
        "container": "backups",
        "access_key": "${AZURE_STORAGE_KEY}"
      },
      "gcs": {
        "enabled": false,
        "bucket": "monitoring-backups",
        "project_id": "my-project",
        "credentials_file": "/etc/gcs-credentials.json"
      },
      "ftp": {
        "enabled": false,
        "host": "backup.example.com",
        "port": 21,
        "username": "${FTP_USERNAME}",
        "password": "${FTP_PASSWORD}",
        "directory": "/monitoring-backups",
        "passive_mode": true
      }
    },
    "sync_schedule": "0 8 * * *",
    "bandwidth_limit": "10MB",
    "retry_attempts": 3,
    "verify_upload": true
  },
  "restore_config": {
    "restore_directory": "/var/restore/monitoring",
    "pre_restore_hooks": [
      "docker-compose -f docker-compose.monitoring.yml stop",
      "docker volume rm prometheus-data grafana-data || true"
    ],
    "post_restore_hooks": [
      "docker-compose -f docker-compose.monitoring.yml up -d",
      "sleep 30",
      "curl -f http://localhost:9090/-/ready"
    ],
    "validation": {
      "enabled": true,
      "health_checks": [
        "http://localhost:9090/-/ready",
        "http://localhost:3000/api/health",
        "http://localhost:9093/-/ready"
      ],
      "timeout_seconds": 300,
      "retry_attempts": 5
    }
  },
  "disaster_recovery": {
    "enabled": true,
    "rpo_hours": 24,
    "rto_hours": 4,
    "backup_sites": [
      {
        "name": "primary",
        "location": "local",
        "priority": 1,
        "capacity_gb": 1000
      },
      {
        "name": "secondary",
        "location": "cloud",
        "priority": 2,
        "capacity_gb": 500
      }
    ],
    "failover_procedures": {
      "automatic": false,
      "notification_required": true,
      "approval_required": true,
      "rollback_plan": true
    }
  },
  "monitoring": {
    "backup_metrics": {
      "enabled": true,
      "prometheus_endpoint": "http://prometheus:9090/metrics",
      "metrics_prefix": "monitoring_backup"
    },
    "alerts": {
      "backup_failure": {
        "enabled": true,
        "severity": "critical",
        "threshold": 1
      },
      "backup_duration": {
        "enabled": true,
        "severity": "warning",
        "threshold_hours": 2
      },
      "backup_size_growth": {
        "enabled": true,
        "severity": "warning",
        "threshold_percent": 50
      },
      "restore_test_failure": {
        "enabled": true,
        "severity": "warning",
        "threshold": 1
      }
    }
  },
  "testing": {
    "restore_testing": {
      "enabled": true,
      "schedule": "0 10 1 * *",
      "test_environment": "staging",
      "automated_validation": true,
      "cleanup_after_test": true
    },
    "backup_verification": {
      "enabled": true,
      "schedule": "0 12 * * *",
      "verification_methods": [
        "checksum",
        "file_count",
        "size_validation"
      ]
    }
  }
}