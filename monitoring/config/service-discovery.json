{
  "discovery_config": {
    "enabled": true,
    "interval_seconds": 30,
    "timeout_seconds": 10,
    "retry_attempts": 3,
    "retry_delay_seconds": 5
  },
  "docker_discovery": {
    "enabled": true,
    "docker_socket": "/var/run/docker.sock",
    "networks": ["blog-system_monitoring", "blog-system_default"],
    "label_filters": {
      "monitoring.enable": "true",
      "prometheus.scrape": "true"
    },
    "port_mapping": {
      "prometheus": 9090,
      "grafana": 3000,
      "alertmanager": 9093,
      "loki": 3100,
      "jaeger-query": 16686,
      "jaeger-collector": 14268,
      "elasticsearch": 9200,
      "kibana": 5601,
      "node-exporter": 9100,
      "cadvisor": 8080,
      "promtail": 9080,
      "filebeat": 5066,
      "metricbeat": 5067,
      "traefik": 8080,
      "blog-frontend": 3000,
      "blog-backend": 3001,
      "postgres": 5432,
      "redis": 6379,
      "nginx": 80
    },
    "health_check_paths": {
      "prometheus": "/api/v1/status/config",
      "grafana": "/api/health",
      "alertmanager": "/api/v1/status",
      "loki": "/ready",
      "jaeger-query": "/api/services",
      "elasticsearch": "/_cluster/health",
      "kibana": "/api/status",
      "blog-frontend": "/health",
      "blog-backend": "/api/health",
      "traefik": "/ping"
    }
  },
  "kubernetes_discovery": {
    "enabled": false,
    "kubeconfig_path": "~/.kube/config",
    "namespace": "blog-system",
    "label_selectors": {
      "app.kubernetes.io/part-of": "blog-system",
      "monitoring.enable": "true"
    },
    "annotation_filters": {
      "prometheus.io/scrape": "true",
      "prometheus.io/port": "",
      "prometheus.io/path": "/metrics"
    },
    "service_types": ["ClusterIP", "NodePort", "LoadBalancer"]
  },
  "consul_discovery": {
    "enabled": false,
    "consul_address": "http://consul:8500",
    "datacenter": "dc1",
    "service_tags": ["monitoring", "blog-system"],
    "health_check_interval": "10s",
    "deregister_critical_after": "1m"
  },
  "static_targets": {
    "prometheus": {
      "targets": ["prometheus:9090"],
      "labels": {
        "job": "prometheus",
        "service": "prometheus",
        "environment": "${ENVIRONMENT:-development}",
        "team": "platform"
      }
    },
    "grafana": {
      "targets": ["grafana:3000"],
      "labels": {
        "job": "grafana",
        "service": "grafana",
        "environment": "${ENVIRONMENT:-development}",
        "team": "platform"
      }
    },
    "alertmanager": {
      "targets": ["alertmanager:9093"],
      "labels": {
        "job": "alertmanager",
        "service": "alertmanager",
        "environment": "${ENVIRONMENT:-development}",
        "team": "platform"
      }
    },
    "loki": {
      "targets": ["loki:3100"],
      "labels": {
        "job": "loki",
        "service": "loki",
        "environment": "${ENVIRONMENT:-development}",
        "team": "platform"
      }
    },
    "jaeger": {
      "targets": ["jaeger-query:16686"],
      "labels": {
        "job": "jaeger",
        "service": "jaeger",
        "environment": "${ENVIRONMENT:-development}",
        "team": "platform"
      }
    },
    "elasticsearch": {
      "targets": ["elasticsearch:9200"],
      "labels": {
        "job": "elasticsearch",
        "service": "elasticsearch",
        "environment": "${ENVIRONMENT:-development}",
        "team": "platform"
      }
    },
    "kibana": {
      "targets": ["kibana:5601"],
      "labels": {
        "job": "kibana",
        "service": "kibana",
        "environment": "${ENVIRONMENT:-development}",
        "team": "platform"
      }
    },
    "node-exporter": {
      "targets": ["node-exporter:9100"],
      "labels": {
        "job": "node-exporter",
        "service": "node-exporter",
        "environment": "${ENVIRONMENT:-development}",
        "team": "infrastructure"
      }
    },
    "cadvisor": {
      "targets": ["cadvisor:8080"],
      "labels": {
        "job": "cadvisor",
        "service": "cadvisor",
        "environment": "${ENVIRONMENT:-development}",
        "team": "infrastructure"
      }
    },
    "blog-frontend": {
      "targets": ["blog-frontend:3000"],
      "labels": {
        "job": "blog-frontend",
        "service": "blog-frontend",
        "environment": "${ENVIRONMENT:-development}",
        "team": "frontend"
      }
    },
    "blog-backend": {
      "targets": ["blog-backend:3001"],
      "labels": {
        "job": "blog-backend",
        "service": "blog-backend",
        "environment": "${ENVIRONMENT:-development}",
        "team": "backend"
      }
    },
    "postgres": {
      "targets": ["postgres:5432"],
      "labels": {
        "job": "postgres",
        "service": "postgres",
        "environment": "${ENVIRONMENT:-development}",
        "team": "database"
      }
    },
    "redis": {
      "targets": ["redis:6379"],
      "labels": {
        "job": "redis",
        "service": "redis",
        "environment": "${ENVIRONMENT:-development}",
        "team": "cache"
      }
    },
    "nginx": {
      "targets": ["nginx:80"],
      "labels": {
        "job": "nginx",
        "service": "nginx",
        "environment": "${ENVIRONMENT:-development}",
        "team": "infrastructure"
      }
    },
    "traefik": {
      "targets": ["traefik:8080"],
      "labels": {
        "job": "traefik",
        "service": "traefik",
        "environment": "${ENVIRONMENT:-development}",
        "team": "infrastructure"
      }
    }
  },
  "service_groups": {
    "core_services": {
      "services": ["blog-frontend", "blog-backend", "postgres", "redis"],
      "priority": "high",
      "health_check_interval": 30,
      "alert_on_failure": true
    },
    "monitoring_stack": {
      "services": ["prometheus", "grafana", "alertmanager", "loki", "jaeger"],
      "priority": "medium",
      "health_check_interval": 60,
      "alert_on_failure": true
    },
    "logging_stack": {
      "services": ["elasticsearch", "kibana", "filebeat", "metricbeat", "promtail"],
      "priority": "medium",
      "health_check_interval": 60,
      "alert_on_failure": false
    },
    "infrastructure": {
      "services": ["nginx", "traefik", "node-exporter", "cadvisor"],
      "priority": "low",
      "health_check_interval": 120,
      "alert_on_failure": false
    }
  },
  "auto_scaling": {
    "enabled": false,
    "metrics_threshold": {
      "cpu_usage_percent": 80,
      "memory_usage_percent": 85,
      "request_rate_per_sec": 1000,
      "response_time_ms": 2000
    },
    "scaling_policies": {
      "blog-frontend": {
        "min_instances": 1,
        "max_instances": 5,
        "scale_up_cooldown_minutes": 5,
        "scale_down_cooldown_minutes": 10
      },
      "blog-backend": {
        "min_instances": 1,
        "max_instances": 3,
        "scale_up_cooldown_minutes": 5,
        "scale_down_cooldown_minutes": 10
      }
    }
  },
  "load_balancing": {
    "enabled": true,
    "algorithm": "round_robin",
    "health_check": {
      "enabled": true,
      "interval_seconds": 30,
      "timeout_seconds": 5,
      "unhealthy_threshold": 3,
      "healthy_threshold": 2
    },
    "sticky_sessions": {
      "enabled": false,
      "cookie_name": "JSESSIONID",
      "cookie_duration_minutes": 30
    }
  },
  "circuit_breaker": {
    "enabled": true,
    "failure_threshold": 5,
    "recovery_timeout_seconds": 60,
    "half_open_max_calls": 3,
    "services": {
      "blog-backend": {
        "enabled": true,
        "failure_threshold": 3,
        "recovery_timeout_seconds": 30
      },
      "postgres": {
        "enabled": true,
        "failure_threshold": 2,
        "recovery_timeout_seconds": 60
      },
      "redis": {
        "enabled": true,
        "failure_threshold": 5,
        "recovery_timeout_seconds": 30
      }
    }
  },
  "service_mesh": {
    "enabled": false,
    "type": "istio",
    "namespace": "istio-system",
    "mtls_enabled": true,
    "traffic_policies": {
      "retry": {
        "attempts": 3,
        "per_try_timeout": "10s",
        "retry_on": "5xx,reset,connect-failure,refused-stream"
      },
      "timeout": "30s",
      "circuit_breaker": {
        "consecutive_errors": 5,
        "interval": "30s",
        "base_ejection_time": "30s",
        "max_ejection_percent": 50
      }
    }
  },
  "backup_discovery": {
    "enabled": true,
    "fallback_endpoints": {
      "prometheus": ["http://prometheus-backup:9090"],
      "grafana": ["http://grafana-backup:3000"],
      "elasticsearch": ["http://elasticsearch-backup:9200"]
    },
    "health_check_interval": 60,
    "failover_threshold": 3,
    "failback_threshold": 2
  }
}