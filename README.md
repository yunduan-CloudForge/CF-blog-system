# åšå®¢ç³»ç»Ÿ (Blog System)

ä¸€ä¸ªç°ä»£åŒ–çš„å…¨æ ˆåšå®¢ç³»ç»Ÿï¼ŒåŸºäº React + Node.js + Supabase æ„å»ºï¼Œæ”¯æŒæ–‡ç« ç®¡ç†ã€ç”¨æˆ·è®¤è¯ã€è¯„è®ºç³»ç»Ÿç­‰åŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ“ **æ–‡ç« ç®¡ç†**: æ”¯æŒ Markdown ç¼–è¾‘å™¨ï¼Œæ–‡ç« å‘å¸ƒã€ç¼–è¾‘ã€åˆ é™¤
- ğŸ‘¤ **ç”¨æˆ·ç³»ç»Ÿ**: å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¸ªäººèµ„æ–™ç®¡ç†
- ğŸ’¬ **è¯„è®ºç³»ç»Ÿ**: æ”¯æŒæ–‡ç« è¯„è®ºå’Œå›å¤åŠŸèƒ½
- ğŸ” **æœç´¢åŠŸèƒ½**: å…¨æ–‡æœç´¢æ–‡ç« å†…å®¹
- ğŸ“± **å“åº”å¼è®¾è®¡**: é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- ğŸš€ **æ€§èƒ½ä¼˜åŒ–**: ä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ã€ç¼“å­˜ç­–ç•¥
- ğŸ“Š **ç›‘æ§ç³»ç»Ÿ**: å®Œæ•´çš„é”™è¯¯ç›‘æ§ã€æ€§èƒ½ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ
- ğŸ”’ **å®‰å…¨é˜²æŠ¤**: XSS é˜²æŠ¤ã€CSRF é˜²æŠ¤ã€SQL æ³¨å…¥é˜²æŠ¤
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²**: Docker + Docker Compose æ”¯æŒ
- ğŸ”„ **é›¶åœæœºéƒ¨ç½²**: è“ç»¿éƒ¨ç½²ç­–ç•¥

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **æ ·å¼**: Tailwind CSS
- **çŠ¶æ€ç®¡ç†**: Zustand
- **è·¯ç”±**: React Router
- **UI ç»„ä»¶**: Lucide React (å›¾æ ‡)
- **ç¼–è¾‘å™¨**: Monaco Editor (Markdown)
- **HTTP å®¢æˆ·ç«¯**: Axios

### åç«¯
- **è¿è¡Œæ—¶**: Node.js
- **æ¡†æ¶**: Express.js + TypeScript
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **è®¤è¯**: Supabase Auth
- **æ–‡ä»¶å­˜å‚¨**: Supabase Storage
- **ç¼“å­˜**: Redis
- **API æ–‡æ¡£**: Swagger/OpenAPI

### åŸºç¡€è®¾æ–½
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **åå‘ä»£ç†**: Nginx
- **ç›‘æ§**: Prometheus + Grafana
- **æ—¥å¿—**: Loki + Promtail
- **é“¾è·¯è¿½è¸ª**: Jaeger
- **å‘Šè­¦**: Alertmanager
- **CI/CD**: GitHub Actions

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- npm >= 8.0.0 æˆ– pnpm >= 7.0.0
- Docker >= 20.10.0
- Docker Compose >= 2.0.0

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd blog-system
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   # æˆ–
   pnpm install
   ```

3. **ç¯å¢ƒé…ç½®**
   ```bash
   # å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
   cp .env.example .env
   
   # ç¼–è¾‘ç¯å¢ƒå˜é‡
   # é…ç½® Supabase é¡¹ç›®ä¿¡æ¯
   # é…ç½® Redis è¿æ¥ä¿¡æ¯
   ```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   # å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
   npm run dev
   
   # å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨ (æ–°ç»ˆç«¯)
   npm run dev:api
   ```

5. **è®¿é—®åº”ç”¨**
   - å‰ç«¯: http://localhost:5173
   - åç«¯ API: http://localhost:3001
   - API æ–‡æ¡£: http://localhost:3001/api-docs

### Docker éƒ¨ç½²

1. **å¼€å‘ç¯å¢ƒ**
   ```bash
   docker-compose up -d
   ```

2. **ç”Ÿäº§ç¯å¢ƒ**
   ```bash
   docker-compose -f docker-compose.prod.yml up -d
   ```

3. **é›¶åœæœºéƒ¨ç½²**
   ```bash
   # Linux/macOS
   ./scripts/zero-downtime-deploy.sh
   
   # Windows
   .\scripts\zero-downtime-deploy.ps1
   ```

## ğŸ“ é¡¹ç›®ç»“æ„

```
blog-system/
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/         # React ç»„ä»¶
â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/             # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ types/             # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ styles/            # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ api/                   # åç«¯æºç 
â”‚   â”œâ”€â”€ src/               # åç«¯æºç 
â”‚   â”‚   â”œâ”€â”€ routes/        # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ middleware/    # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ services/      # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ types/         # ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ tests/             # åç«¯æµ‹è¯•
â”œâ”€â”€ shared/                # å‰åç«¯å…±äº«ä»£ç 
â”œâ”€â”€ supabase/              # Supabase é…ç½®
â”‚   â””â”€â”€ migrations/        # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”œâ”€â”€ docker/                # Docker é…ç½®æ–‡ä»¶
â”œâ”€â”€ scripts/               # éƒ¨ç½²å’Œè¿ç»´è„šæœ¬
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ monitoring/            # ç›‘æ§é…ç½®
â””â”€â”€ nginx/                 # Nginx é…ç½®
```

## ğŸ“– æ–‡æ¡£

- [éƒ¨ç½²æŒ‡å—](./docs/deployment-guide.md) - è¯¦ç»†çš„éƒ¨ç½²æµç¨‹å’Œé…ç½®è¯´æ˜
- [è¿ç»´æ‰‹å†Œ](./docs/operations-manual.md) - æ—¥å¸¸è¿ç»´æ“ä½œå’Œæ•…éšœå¤„ç†
- [API æ–‡æ¡£](http://localhost:3001/api-docs) - åç«¯ API æ¥å£æ–‡æ¡£
- [æŠ€æœ¯æ¶æ„](./docs/architecture.md) - ç³»ç»Ÿæ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ”§ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ ESLint + Prettier è¿›è¡Œä»£ç æ ¼å¼åŒ–
- éµå¾ª TypeScript ä¸¥æ ¼æ¨¡å¼
- ç»„ä»¶æ–‡ä»¶ä½¿ç”¨ PascalCase å‘½å
- å·¥å…·å‡½æ•°ä½¿ç”¨ camelCase å‘½å

### æäº¤è§„èŒƒ

ä½¿ç”¨ Conventional Commits è§„èŒƒï¼š

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤ bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
```

### åˆ†æ”¯ç­–ç•¥

- `main`: ä¸»åˆ†æ”¯ï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒ
- `develop`: å¼€å‘åˆ†æ”¯ï¼Œç”¨äºé›†æˆæµ‹è¯•
- `feature/*`: åŠŸèƒ½åˆ†æ”¯
- `hotfix/*`: çƒ­ä¿®å¤åˆ†æ”¯

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œå‰ç«¯æµ‹è¯•
npm run test

# è¿è¡Œåç«¯æµ‹è¯•
npm run test:api

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### ç›‘æ§ç³»ç»Ÿ

- **Grafana**: http://localhost:3000 (admin/admin)
- **Prometheus**: http://localhost:9090
- **Jaeger**: http://localhost:16686
- **Alertmanager**: http://localhost:9093

### æ—¥å¿—æŸ¥è¯¢

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
docker-compose logs -f app

# æŸ¥çœ‹ Nginx æ—¥å¿—
docker-compose logs -f nginx

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker-compose logs -f postgres
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£å†²çª**
   - æ£€æŸ¥ç«¯å£å ç”¨ï¼š`netstat -tulpn | grep :5173`
   - ä¿®æ”¹ç«¯å£é…ç½®æˆ–åœæ­¢å†²çªæœåŠ¡

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ Supabase é…ç½®
   - éªŒè¯ç½‘ç»œè¿æ¥
   - æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—

3. **Docker æ„å»ºå¤±è´¥**
   - æ¸…ç† Docker ç¼“å­˜ï¼š`docker system prune -a`
   - æ£€æŸ¥ Dockerfile è¯­æ³•
   - éªŒè¯åŸºç¡€é•œåƒå¯ç”¨æ€§

æ›´å¤šæ•…éšœæ’é™¤ä¿¡æ¯è¯·å‚è€ƒ [è¿ç»´æ‰‹å†Œ](./docs/operations-manual.md)ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. **Fork é¡¹ç›®**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯** (`git checkout -b feature/AmazingFeature`)
3. **æäº¤æ›´æ”¹** (`git commit -m 'Add some AmazingFeature'`)
4. **æ¨é€åˆ°åˆ†æ”¯** (`git push origin feature/AmazingFeature`)
5. **åˆ›å»º Pull Request**

### è´¡çŒ®ç±»å‹

- ğŸ› Bug ä¿®å¤
- âœ¨ æ–°åŠŸèƒ½å¼€å‘
- ğŸ“ æ–‡æ¡£æ”¹è¿›
- ğŸ¨ UI/UX ä¼˜åŒ–
- âš¡ æ€§èƒ½ä¼˜åŒ–
- ğŸ§ª æµ‹è¯•è¦†ç›–
- ğŸ”§ å·¥å…·å’Œé…ç½®

### å¼€å‘ç¯å¢ƒè®¾ç½®

1. ç¡®ä¿æœ¬åœ°ç¯å¢ƒæ»¡è¶³è¦æ±‚
2. å®‰è£…å¼€å‘ä¾èµ–
3. é…ç½®ä»£ç ç¼–è¾‘å™¨ï¼ˆæ¨è VS Codeï¼‰
4. å®‰è£…æ¨èçš„æ‰©å±•æ’ä»¶

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

- [React](https://reactjs.org/) - ç”¨æˆ·ç•Œé¢åº“
- [Supabase](https://supabase.com/) - å¼€æº Firebase æ›¿ä»£æ–¹æ¡ˆ
- [Tailwind CSS](https://tailwindcss.com/) - CSS æ¡†æ¶
- [Vite](https://vitejs.dev/) - å‰ç«¯æ„å»ºå·¥å…·

## ğŸ“ è”ç³»æˆ‘ä»¬

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ï¼š

- æäº¤ [Issue](../../issues)
- å‘é€é‚®ä»¶åˆ°ï¼š[your-email@example.com]
- åŠ å…¥æˆ‘ä»¬çš„è®¨è®ºç¾¤ï¼š[é“¾æ¥]

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼